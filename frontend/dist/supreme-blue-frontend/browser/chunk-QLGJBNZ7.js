import{a as oe,b as re}from"./chunk-KHFZAU7C.js";import{b as Y,c as Z,d as te,e as ie}from"./chunk-K2SJH3O2.js";import{a as z,c as H,f as J}from"./chunk-B7D3IYK4.js";import{a as K,g as Q,h as X}from"./chunk-MH2VXUWF.js";import{b as V,f as P,g as R,h as q,i as j,j as A,q as D,s as O,u as $,w as ee}from"./chunk-HNMV2PS5.js";import{a as N,c as T,d as k,g as L}from"./chunk-ACY4WVXQ.js";import{a as ne}from"./chunk-INZLI3TU.js";import{Y as G}from"./chunk-RFM3TPKV.js";import"./chunk-YCMZOG5D.js";import{Fb as l,Gb as v,Ha as a,Hb as W,Ia as g,Jb as d,Kb as p,Lb as u,Nb as x,Ra as h,Ya as C,a as I,bb as S,gb as w,ha as b,ib as E,jb as F,kb as i,lb as n,oa as _,pa as M,qb as y,tb as U,uc as B,vb as c}from"./chunk-6JSNIO2G.js";var ae=(r,f)=>f.roleId;function me(r,f){if(r&1&&(i(0,"mat-option",14),l(1),n()),r&2){let t=f.$implicit;S("value",t.roleId),a(),v(t.roleName)}}function le(r,f){if(r&1){let t=y();i(0,"div",4)(1,"mat-form-field",5)(2,"mat-label"),l(3,"Role"),n(),i(4,"mat-select",13),u("ngModelChange",function(e){_(t);let m=c();return p(m.form.roleId,e)||(m.form.roleId=e),M(e)}),E(5,me,2,2,"mat-option",14,ae),n()()()}if(r&2){let t=c();a(4),d("ngModel",t.form.roleId),a(),F(t.roles())}}function se(r,f){if(r&1){let t=y();i(0,"div",4)(1,"mat-form-field",5)(2,"mat-label"),l(3,"Password"),n(),i(4,"input",15),u("ngModelChange",function(e){_(t);let m=c();return p(m.form.password,e)||(m.form.password=e),M(e)}),n()()()}if(r&2){let t=c();a(4),d("ngModel",t.form.password)}}var Ne=(()=>{class r{route;router;api;snackBar;isEdit=!1;userId=null;roles=h([]);saving=h(!1);form={fullName:"",roleId:3,username:"",email:"",phone:"",password:""};constructor(t,s,e,m){this.route=t,this.router=s,this.api=e,this.snackBar=m}ngOnInit(){this.loadRoles(),this.userId=this.route.snapshot.paramMap.get("id"),this.userId&&this.userId!=="new"&&(this.isEdit=!0,this.loadUser())}loadRoles(){this.api.get("users/roles").subscribe({next:t=>this.roles.set(t)})}loadUser(){this.api.get(`users/${this.userId}`).subscribe({next:t=>{this.form=I({},t)}})}onSubmit(){this.saving.set(!0),(this.isEdit?this.api.put(`users/${this.userId}`,this.form):this.api.post("users",this.form)).subscribe({next:()=>{this.snackBar.open("User saved successfully","Close",{duration:3e3}),this.router.navigate(["/users"])},error:s=>{this.saving.set(!1),this.snackBar.open(s.error?.message||"Failed to save","Close",{duration:5e3})}})}static \u0275fac=function(s){return new(s||r)(g(N),g(T),g(ne),g(te))};static \u0275cmp=b({type:r,selectors:[["app-user-form"]],standalone:!0,features:[x],decls:33,vars:9,consts:[[1,"page-container"],[1,"page-header"],[1,"form-container"],[3,"ngSubmit"],[1,"form-row"],["appearance","outline"],["matInput","","name","fullName","required","",3,"ngModelChange","ngModel"],["matInput","","name","username",3,"ngModelChange","ngModel"],["matInput","","name","email","type","email",3,"ngModelChange","ngModel"],["matInput","","name","phone",3,"ngModelChange","ngModel"],[1,"actions"],["mat-button","","type","button","routerLink","/users"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["name","roleId","required","",3,"ngModelChange","ngModel"],[3,"value"],["matInput","","name","password","type","password","required","",3,"ngModelChange","ngModel"]],template:function(s,e){s&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),l(3),n()(),i(4,"mat-card",2)(5,"mat-card-content")(6,"form",3),U("ngSubmit",function(){return e.onSubmit()}),i(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),l(10,"Full Name"),n(),i(11,"input",6),u("ngModelChange",function(o){return p(e.form.fullName,o)||(e.form.fullName=o),o}),n()()(),C(12,le,7,1,"div",4),i(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),l(16,"Username"),n(),i(17,"input",7),u("ngModelChange",function(o){return p(e.form.username,o)||(e.form.username=o),o}),n()(),i(18,"mat-form-field",5)(19,"mat-label"),l(20,"Email"),n(),i(21,"input",8),u("ngModelChange",function(o){return p(e.form.email,o)||(e.form.email=o),o}),n()()(),i(22,"div",4)(23,"mat-form-field",5)(24,"mat-label"),l(25,"Phone"),n(),i(26,"input",9),u("ngModelChange",function(o){return p(e.form.phone,o)||(e.form.phone=o),o}),n()()(),C(27,se,5,1,"div",4),i(28,"div",10)(29,"button",11),l(30,"Cancel"),n(),i(31,"button",12),l(32),n()()()()()()),s&2&&(a(3),v(e.isEdit?"Edit User":"New User"),a(8),d("ngModel",e.form.fullName),a(),w(e.isEdit?-1:12),a(5),d("ngModel",e.form.username),a(4),d("ngModel",e.form.email),a(5),d("ngModel",e.form.phone),a(),w(e.isEdit?-1:27),a(4),S("disabled",e.saving()),a(),W(" ",e.saving()?"Saving...":"Save"," "))},dependencies:[B,O,A,V,P,R,D,j,q,L,k,J,z,H,X,Q,K,Z,Y,re,oe,G,ee,$,ie],encapsulation:2})}return r})();export{Ne as UserFormComponent};
