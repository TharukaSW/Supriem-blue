import{a as Rt,b as Ft,c as Nt,d as At,e as Ot,f as Bt,g as H,h as Pt}from"./chunk-S6CVKGS6.js";import{a as $}from"./chunk-ESQKKY53.js";import{a as wt,b as Dt,c as kt,d as Lt}from"./chunk-4IKFU3EN.js";import{a as Tt,b as yt}from"./chunk-KHFZAU7C.js";import{a as _t,b as Ct,c as gt,d as ht,e as It,f as Mt,g as vt,h as xt,i as St,j as bt,k as Et}from"./chunk-XYH6MH5Y.js";import{a as ft,b as ut}from"./chunk-ZJOCXRYO.js";import{b as O,c as B,d as q,e as j}from"./chunk-K2SJH3O2.js";import{a as mt,c as lt,f as dt}from"./chunk-B7D3IYK4.js";import{a as F,b as st,d as ct,g as N,h as A}from"./chunk-MH2VXUWF.js";import{b as k,d as L,f as R,g as X,i as Y,j as Z,l as tt,o as et,q as it,r as nt,s as ot,t as at,u as P,v as pt,w as V}from"./chunk-HNMV2PS5.js";import{c as Q}from"./chunk-ACY4WVXQ.js";import"./chunk-INZLI3TU.js";import{Y as rt}from"./chunk-RFM3TPKV.js";import"./chunk-YCMZOG5D.js";import{Fb as a,Gb as _,Ha as l,Hb as T,Ia as c,Jb as U,Kb as J,Lb as K,Nb as y,Ra as S,Ya as s,bb as p,db as z,gb as b,ha as M,kb as o,lb as i,mb as C,nb as g,oa as v,ob as h,pa as x,qb as E,qc as w,tb as f,uc as D,vb as I}from"./chunk-6JSNIO2G.js";function Jt(t,m){t&1&&(o(0,"mat-error"),a(1," Item code is required "),i())}function Kt(t,m){t&1&&(o(0,"mat-error"),a(1," Item name is required "),i())}function Qt(t,m){t&1&&(o(0,"mat-error"),a(1," Item type is required "),i())}var G=(()=>{class t{fb;itemService;snackBar;dialogRef;data;form;saving=!1;constructor(e,r,n,d,u){this.fb=e,this.itemService=r,this.snackBar=n,this.dialogRef=d,this.data=u}ngOnInit(){this.form=this.fb.group({itemCode:[{value:this.data.item?this.data.item.itemCode:"",disabled:this.data.mode==="edit"},[L.required]],itemName:[this.data.item?this.data.item.itemName:"",[L.required]],itemType:[this.data.item?this.data.item.itemType:"RAW",[L.required]]})}onSave(){if(this.form.valid){this.saving=!0;let e=this.form.getRawValue();(this.data.mode==="create"?this.itemService.create(e):this.itemService.update(this.data.item.itemId,e)).subscribe({next:()=>{this.snackBar.open(`Item ${this.data.mode==="create"?"created":"updated"} successfully`,"Close",{duration:3e3}),this.dialogRef.close(!0)},error:n=>{this.snackBar.open(n.error?.message||"Error saving item","Close",{duration:3e3}),this.saving=!1}})}}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(r){return new(r||t)(c(nt),c($),c(q),c(Rt),c(Ft))};static \u0275cmp=M({type:t,selectors:[["app-item-form-dialog"]],standalone:!0,features:[y],decls:30,vars:7,consts:[["mat-dialog-title",""],[1,"item-form",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","itemCode","placeholder","RM001","required",""],[4,"ngIf"],["matInput","","formControlName","itemName","placeholder","Cotton Fabric","required",""],["formControlName","itemType","required",""],["value","RAW"],["value","PRODUCT"],["value","SERVICE"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(r,n){if(r&1&&(o(0,"h2",0),a(1),i(),o(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),a(6,"Item Code"),i(),C(7,"input",3),s(8,Jt,2,0,"mat-error",4),i(),o(9,"mat-form-field",2)(10,"mat-label"),a(11,"Item Name"),i(),C(12,"input",5),s(13,Kt,2,0,"mat-error",4),i(),o(14,"mat-form-field",2)(15,"mat-label"),a(16,"Item Type"),i(),o(17,"mat-select",6)(18,"mat-option",7),a(19,"Raw Material"),i(),o(20,"mat-option",8),a(21,"Product"),i(),o(22,"mat-option",9),a(23,"Service"),i()(),s(24,Qt,2,0,"mat-error",4),i()()(),o(25,"mat-dialog-actions",10)(26,"button",11),f("click",function(){return n.onCancel()}),a(27,"Cancel"),i(),o(28,"button",12),f("click",function(){return n.onSave()}),a(29),i()()),r&2){let d,u,W;l(),_(n.data.mode==="create"?"Add New Item":"Edit Item"),l(2),p("formGroup",n.form),l(5),p("ngIf",(d=n.form.get("itemCode"))==null?null:d.hasError("required")),l(5),p("ngIf",(u=n.form.get("itemName"))==null?null:u.hasError("required")),l(11),p("ngIf",(W=n.form.get("itemType"))==null?null:W.hasError("required")),l(4),p("disabled",!n.form.valid||n.saving),l(),T(" ",n.saving?"Saving...":"Save"," ")}},dependencies:[D,w,at,Z,k,R,X,it,tt,et,H,At,Bt,Ot,V,P,A,N,F,st,B,O,yt,Tt,rt,j],styles:[".item-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;min-width:400px;padding:20px 0}.full-width[_ngcontent-%COMP%]{width:100%}"]})}return t})();function Xt(t,m){t&1&&(o(0,"th",19),a(1,"Code"),i())}function Yt(t,m){if(t&1&&(o(0,"td",20),a(1),i()),t&2){let e=m.$implicit;l(),_(e.itemCode)}}function Zt(t,m){t&1&&(o(0,"th",19),a(1,"Name"),i())}function te(t,m){if(t&1&&(o(0,"td",20)(1,"strong"),a(2),i()()),t&2){let e=m.$implicit;l(2),_(e.itemName)}}function ee(t,m){t&1&&(o(0,"th",19),a(1,"Type"),i())}function ie(t,m){if(t&1&&(o(0,"td",20)(1,"mat-chip"),a(2),i()()),t&2){let e=m.$implicit;l(2),_(e.itemType)}}function ne(t,m){t&1&&(o(0,"th",19),a(1,"Status"),i())}function oe(t,m){if(t&1&&(o(0,"td",20)(1,"mat-chip"),a(2),i()()),t&2){let e=m.$implicit;l(),z("active",e.isActive)("inactive",!e.isActive),l(),T(" ",e.isActive?"Active":"Inactive"," ")}}function ae(t,m){t&1&&(o(0,"th",19),a(1,"Actions"),i())}function re(t,m){if(t&1){let e=E();o(0,"button",23),f("click",function(){v(e);let n=I().$implicit,d=I();return x(d.deleteItem(n))}),o(1,"mat-icon"),a(2,"block"),i()()}}function me(t,m){if(t&1){let e=E();o(0,"td",20)(1,"button",21),f("click",function(){let n=v(e).$implicit,d=I();return x(d.editItem(n))}),o(2,"mat-icon"),a(3,"edit"),i()(),s(4,re,3,0,"button",22),i()}if(t&2){let e=m.$implicit;l(4),p("ngIf",e.isActive)}}function le(t,m){t&1&&C(0,"tr",24)}function de(t,m){t&1&&C(0,"tr",25)}function se(t,m){if(t&1){let e=E();o(0,"button",2),f("click",function(){v(e);let n=I(2);return x(n.addItem())}),a(1," Add First Item "),i()}}function ce(t,m){if(t&1&&(o(0,"div",17)(1,"mat-icon"),a(2,"inventory_2"),i(),o(3,"p"),a(4),i(),s(5,se,2,0,"button",26),i()),t&2){let e=I();l(4),_(e.searchText?"No items found":"No items added yet"),l(),b(e.searchText?-1:5)}}function pe(t,m){t&1&&(o(0,"div",18)(1,"p"),a(2,"Loading items..."),i()())}var ze=(()=>{class t{router;itemService;dialog;snackBar;items=S([]);filteredItems=S([]);loading=S(!1);searchText="";displayedColumns=["code","name","type","status","actions"];constructor(e,r,n,d){this.router=e,this.itemService=r,this.dialog=n,this.snackBar=d}ngOnInit(){this.loadItems()}loadItems(){this.loading.set(!0),this.itemService.getAll().subscribe({next:e=>{let r=Array.isArray(e)?e:e.data||[];this.items.set(r),this.filteredItems.set(r),this.loading.set(!1)},error:()=>{this.snackBar.open("Error loading items","Close",{duration:3e3}),this.loading.set(!1)}})}applyFilter(){let e=this.searchText.toLowerCase(),r=this.items().filter(n=>n.itemCode.toLowerCase().includes(e)||n.itemName.toLowerCase().includes(e));this.filteredItems.set(r)}addItem(){this.dialog.open(G,{width:"600px",data:{mode:"create"}}).afterClosed().subscribe(r=>{r&&this.loadItems()})}editItem(e){this.dialog.open(G,{width:"600px",data:{mode:"edit",item:e}}).afterClosed().subscribe(n=>{n&&this.loadItems()})}deleteItem(e){this.dialog.open(Pt,{data:{title:"Deactivate Item",message:`Are you sure you want to deactivate ${e.itemName}?`,confirmText:"Deactivate"}}).afterClosed().subscribe(n=>{n&&this.itemService.delete(e.itemId).subscribe({next:()=>{this.snackBar.open("Item deactivated successfully","Close",{duration:3e3}),this.loadItems()},error:()=>{this.snackBar.open("Error deactivating item","Close",{duration:3e3})}})})}static \u0275fac=function(r){return new(r||t)(c(Q),c($),c(Nt),c(q))};static \u0275cmp=M({type:t,selectors:[["app-items-list"]],standalone:!0,features:[y],decls:37,vars:6,consts:[[1,"page-container"],[1,"page-header"],["mat-raised-button","","color","primary",3,"click"],[1,"filters"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by code or name...",3,"ngModelChange","input","ngModel"],["matSuffix",""],["mat-table","",1,"items-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","clickable-row",4,"matRowDef","matRowDefColumns"],[1,"no-data"],[1,"loading"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","","matTooltip","Deactivate","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Deactivate","color","warn",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable-row"],["mat-raised-button","","color","primary"]],template:function(r,n){r&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Items"),i(),o(4,"button",2),f("click",function(){return n.addItem()}),o(5,"mat-icon"),a(6,"add"),i(),a(7," Add Item "),i()(),o(8,"mat-card")(9,"mat-card-content")(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),a(13,"Search Items"),i(),o(14,"input",5),K("ngModelChange",function(u){return J(n.searchText,u)||(n.searchText=u),u}),f("input",function(){return n.applyFilter()}),i(),o(15,"mat-icon",6),a(16,"search"),i()()(),o(17,"table",7),g(18,8),s(19,Xt,2,0,"th",9)(20,Yt,2,1,"td",10),h(),g(21,11),s(22,Zt,2,0,"th",9)(23,te,3,1,"td",10),h(),g(24,12),s(25,ee,2,0,"th",9)(26,ie,3,1,"td",10),h(),g(27,13),s(28,ne,2,0,"th",9)(29,oe,3,5,"td",10),h(),g(30,14),s(31,ae,2,0,"th",9)(32,me,5,1,"td",10),h(),s(33,le,1,0,"tr",15)(34,de,1,0,"tr",16),i(),s(35,ce,6,2,"div",17)(36,pe,3,0,"div",18),i()()()),r&2&&(l(14),U("ngModel",n.searchText),l(3),p("dataSource",n.filteredItems()),l(16),p("matHeaderRowDef",n.displayedColumns),l(),p("matRowDefColumns",n.displayedColumns),l(),b(n.filteredItems().length===0&&!n.loading()?35:-1),l(),b(n.loading()?36:-1))},dependencies:[D,w,ot,k,R,Y,dt,mt,lt,ut,ft,V,P,pt,Et,_t,gt,vt,ht,Ct,xt,It,Mt,St,bt,Lt,kt,Dt,wt,A,N,F,ct,B,O,H,j],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.filters[_ngcontent-%COMP%]{margin-bottom:16px}.search-field[_ngcontent-%COMP%]{width:400px}.items-table[_ngcontent-%COMP%]{width:100%}mat-chip.active[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}mat-chip.inactive[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.clickable-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}"]})}return t})();export{ze as ItemsListComponent};
